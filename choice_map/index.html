<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>KIT オープンキャンパス</title>
    <style>
        #map{
            height:300px;
            width: 400px;
        }
    </style>
    <script type="text/javascript" src="jquery-3.3.1.min.js"></script>
    <script src="main_thema.js"></script>
    <script>
        var my_size = 17;//拡大サイズ
            var my_latlng; //現在位置用の変数
            function initMap(){
                //geolocaion APIに対応している場合
                if(navigator.geolocation){
                    //位置情報が取得できる場合
                    navigator.geolocation.getCurrentPosition(
                        //true
                        function(position){
                            //現在地の緯度経度
                            my_latlng = new google.maps.LatLng(position.coords.latitude,position.coords.longitude);
                            var mapOptions = {
                                zoom:my_size,
                                center:my_latlng
                            };
                            //mapに地図を埋め込む
                            var map = new google.maps.Map(
                                document.getElementById("map"),mapOptions
                            );
                            //自分の位置のマーカー
                            var my_marker = new google.maps.Marker({
                                map:map,
                                position:my_latlng,
                                icon:"http://maps.google.com/mapfiles/ms/micons/man.png"
                            });
                        },
                        //false
                        function(error){
                           switch(error.code){
                            case 1:// PERMISSION_DENIED
                                alert("位置情報の利用が許可されていません");
                            break;
                            case 2: // POSITION_UNAVAILABLE
                                alert("現在位置が取得できませんでした");
                            break;
                            case 3: // TIMEOUT
                                alert("タイムアウトになりました");
                            break;
                            default:
                                alert("その他のエラー(エラーコード:"+error.code+")");
                            break;
                           }
                        }
                    );    
                }
                //APIが対応していない場合
                else{
                    alert("この端末では位置情報が取得できません");   
                }
            }
            //selectが変更された場合の処理
            function selectchanged(){
                //号館の座標を登録しておくリスト
                var latlng = new Array(4);
                latlng[0] = new google.maps.LatLng(36.531498, 136.627418);//LC（デバッグ用）
                latlng[1] = new google.maps.LatLng(36.531802, 136.628244);//7号館
                latlng[2] = new google.maps.LatLng(36.530442, 136.629382);//8号館
                latlng[3] = new google.maps.LatLng(36.531240, 136.629425);//23号館
                //デバッグ用
                console.log("selectchanged");
                //selの値を取得
                var sl = document.getElementById("sel");
                //selの選択された番号を取得
                var value = document.myselect.sel.selectedIndex;
                //mapに書き込み
                var map = new google.maps.Map(document.getElementById("map"),{
                    zoom:my_size,
                    center:latlng[value]

                });
                //マーカーの位置の設定
                var marker = new google.maps.Marker({
                    position:latlng[value],
                    map:map
                });

                var marker = new google.maps.Marker({
                    position:my_latlng,
                    map:map,
                    icon:"http://maps.google.com/mapfiles/ms/micons/man.png"
                });
        }
    </script>
</head>    
<body>
<!--header始まり    -->
<header>
    <div id="title_area">
        <h1>KIESオープンキャンパス情報サイト</h1>
        <h3>KIESプロジェクトによるオープンキャンパス情報サイト</h3>
    </div>
    <nav>
        <ul>
            <li>
                <a>タイムテーブル</a>
            </li>
            <li>
                <a>教室の場所</a>
            </li>
            <li>
                <a>学校マップ</a>
            </li>
        </ul>
    </nav>
</header>

<!--header 終わり  -->
<div id="container">
    <section id = "times">
        <div class= "timeschedule_text">
        <h2 class = "time_schedule">タイムスケジュール</h2>
            <!--  タイムスケジュールセクション    -->
            <table>
                <tr>
                    <td>時間</td>
                    <td>教室</td>
                </tr>
                <tr>
                    <td>10:30 ～ 12:00</td>
                    <td>オリエンテーション</td>
                </tr>
                <tr>
                    <td>13:00 ～ 14:30</td>
                    <td>各学科体験授業</td>
                </tr>
            </table>
        </div>
    </section>
    
    <section　id = "class_room">
          <!-- 教室場所セクション -->
          <div class="class_room-text">
            <h2 class = "class_room">学科別教室場所</h2>
            <h3>工学部</h3>
            <table>
                <tr>
                    <th>学科名</th>
                    <td>教室場所</td>
                </tr>
                <tr>
                    <th>機械工学科</th>
                    <td>教室:24.112</td>
                </tr>
                <tr>
                    <th>航空システム工学科</th>
                    <td>教室:23.112</td>                
                </tr>
                <tr>
                    <th>ロボティクス工学科</th>
                    <td>教室:23.102</td>
                </tr>
                <tr>
                    <th>電気電子工学科</th>
                    <td>教室:7.202</td>
                </tr>
                <tr>
                    <th>情報工学科</th>
                    <td>教室:7.203</td>
                </tr>
                <tr>
                    <th>環境土木工学科</th>
                    <td>教室:7.115</td>
                </tr>
            </table>
            <h3>情報フロンティア学部</h3>
            <table>
                <tr>
                    <th>メディア情報工学科</th>
                    <td>教室:7.204</td>
                </tr>
                <tr>
                    <th>経営情報工学科</th>
                    <td>教室:7.303</td>
                </tr>
                <tr>
                    <th>心理科学科</th>
                    <td>教室:7.305</td>
                </tr>
            </table>
            <h3>建築学部</h3>
            <table>
                <tr>
                    <th>建築学科</th>
                    <td>教室:23.211</td>
                </tr>
            </table>              
        </div>
     </section>
     <section id="kit_map"> >
        <h2 class = "class_map">教室場所</h2>
            <form name="myselect">
               <select id="sel" onChange="selectchanged()">
                  <option value="0" selected>号館選択</option>
                  <option value="1">7号館</option>
                  <option value="2">8号館</option>
                  <option value="3">23号館</option>
               </select>
            </form>
         <div id="map"></div>
   </section>    
</div>
<!--footer 始まり    -->
<footer>
    <small>KIT Open Campass KIES Project</small>
</footer>
<!--footer 終わり    -->
<script src="http://maps.google.com/maps/api/js?key=AIzaSyAd5K6dGQpJvb3SrZO8C5gsRVnWzb6U4pg&callback=initMap"></script>
</body>
</html>
