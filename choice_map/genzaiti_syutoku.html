<!DOCTYPE html>
<html lang="ja">
    <head>
    <meta charset="UTF-8">
    <style type="text/css">
    #map { 
        height:300px;
        width: :400px;
    }
    </style>
    <script>
        function initMap(){
            if(navigator.geolocation){
                navigator.geolocation.getCurrentPosition(
                    function(position){
                        var my_latlng = new google.maps.LatLng(position.coords.latitude,position.coords.longitude);
                        var mapOptions = {
                            zoom:14,
                            center:my_latlng
                        };
                        var map = new google.maps.Map(
                            document.getElementById("map"),mapOptions
                        );
                        var my_marker = new google.maps.Marker({
                            map:map,
                            position:my_latlng,
                            icon:"http://maps.google.com/mapfiles/ms/micons/man.png"
                        });
                    },
                    function(error){
                       switch(error.code){
                        case 1:// PERMISSION_DENIED
                            alert("位置情報の利用が許可されていません");
                        break;
                        case 2: // POSITION_UNAVAILABLE
                            alert("現在位置が取得できませんでした");
                        break;
                        case 3: // TIMEOUT
                            alert("タイムアウトになりました");
                        break;
                        default:
                            alert("その他のエラー(エラーコード:"+error.code+")");
                        break;
                       }
                    }
                );    
            }
            else{
                alert("この端末では位置情報が取得できません");   
            }
            var latlng = new Array(5);
            latlng[0] = new google.maps.LatLng(36.531498, 136.627418);
            latlng[1] = new google.maps.LatLng(36.531802, 136.628244);
            latlng[2] = new google.maps.LatLng(36.530442, 136.629382);
            latlng[3] = new google.maps.LatLng(36.531240, 136.629425);
            var sel = document.getElementById("myselect");
            //sel.index = 1;
           //map.controls[google.maps.ControlPosition.TOP_CENTER].push(sel);
            google.maps.event.addDomListener(sel,'click',function(){
                });         
        }
        function selectchanged(){
            console.log("selectchanged");
            var sl = document.getElementById("sel");
            var value = document.myselect.sel.selectedIndex;
            var map = new google.maps.Map(document.getElementById("map"),{
                zoom:14,
                center:latlng[value]
                
            });
            
            my_map.setCener(latlang[value]);
            
            var marker = new google.maps.Marker({
                position:latlng[value],
                map:map
            });
            
            
        }
    </script>
  </head>

    <body>
        <div id="map"></div>
        <form name="myselect">
            <select id="sel" onChange="selectchanged()">
              <option value="0" selected>号館選択</option>
              <option value="1">7号館</option>
              <option value="2">8号館</option>
              <option value="3">23号館</option>
            </select>
        </form>
     <script src="http://maps.google.com/maps/api/js?key=AIzaSyAd5K6dGQpJvb3SrZO8C5gsRVnWzb6U4pg&callback=initMap"></script>
    </body>
</html>